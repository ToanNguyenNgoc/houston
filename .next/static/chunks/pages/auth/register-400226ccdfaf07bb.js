(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461],{16659:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/register",function(){return s(5161)}])},37079:function(e,t,s){"use strict";s.d(t,{D:function(){return n},z:function(){return o}});var r=s(67294);function n(){let[e,t]=(0,r.useState)({load:!1,message:"",openAlert:!1,color:"info"}),s=()=>t({...e,load:!0}),n=e=>{var s;t({load:!1,message:null!==(s=e.message)&&void 0!==s?s:"",openAlert:!0,element:e.element,color:e.color})},i=()=>t({...e,openAlert:!1});return{noti:e,firstLoad:s,resultLoad:n,onCloseNoti:i}}var i=s(71697);function o(){let[e,t]=(0,r.useState)([]),s=async e=>{let{e:s,callBack:r}=e;if(s.target.files)try{var n;let e=[];for(var o=0;o<(null===(n=s.target.files)||void 0===n?void 0:n.length);o++){let t=s.target.files[o],r=new FormData,n={original_url:"",mediaId:o};r.append("file",t);let a=await i.h.uploadMedia(r);a&&(n={original_url:a.data.original_url,mediaId:a.data.id}),e.push(n)}t(e),r&&r(e)}catch(e){}};return{medias:e,handlePostMedia:s}}},5161:function(e,t,s){"use strict";s.r(t);var r=s(85893),n=s(14833),i=s(67294),o=s(70263),a=s.n(o),l=s(8987),u=s(48228),c=s(71697),h=s(87536),m=s(74231),d=s(64074),p=s(47533),f=s(37079),_=s(79894),x=s(83321),g=s(11163);let v=i.memo(function(){let[e,t]=(0,i.useState)(1),s=(0,g.useRouter)(),{noti:n,resultLoad:o,onCloseNoti:v}=(0,f.D)(),w=m.Ry({email:m.Z_().required("Vui l\xf2ng nhập email").matches(d.Gu.email,{message:"Vui l\xf2ng nhập đ\xfang định dạng"}),fullname:1===e?m.Z_():m.Z_().required("Vui l\xf2ng nhập họ v\xe0 t\xean"),telephone:1===e?m.Z_():m.Z_().required("Vui l\xf2ng nhập số điện thoại"),password:1===e?m.Z_():m.Z_().required("Vui l\xf2ng nhập mật khẩu"),confirm_password:1===e?m.Z_():m.Z_().required("Vui l\xf2ng nhập lại mật khẩu").oneOf([m.iH("password"),null],"Mật khẩu nhập lại kh\xf4ng đ\xfang"),code:1===e?m.Z_():m.Z_().required("Vui l\xf2ng nhập m\xe3 OTP")}),{handleSubmit:b,formState:{errors:j},register:y}=(0,h.cI)({resolver:(0,p.X)(w),defaultValues:{email:"",password:"",fullname:"",telephone:"",code:"",confirm_password:""}}),{mutate:N,isLoading:R}=(0,u.D)({mutationKey:["REGISTER"],mutationFn:e=>c.h.register(e),onSuccess:()=>{o({message:1===e?"Đ\xe3 gửi email":"Đăng k\xfd th\xe0nh c\xf4ng",color:"success"}),t(2),2===e&&setTimeout(()=>{s.push("/auth/login")})},onError:e=>{var t,s,r;o({message:null!==(r=null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)&&void 0!==r?r:"",color:"error"})}}),M=e=>{N(e)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.Ct,{open:n.openAlert,close:v,severity:n.color,message:n.message}),1===e?(0,r.jsxs)("form",{autoComplete:"off",onSubmit:b(M),children:[(0,r.jsxs)("div",{className:a().form_row,children:[(0,r.jsx)("input",{...y("email"),type:"text",className:"app-input",placeholder:"Email"}),j.email&&(0,r.jsx)("p",{className:a().form_row_error,children:j.email.message})]}),(0,r.jsx)("div",{className:a().form_btn,children:(0,r.jsx)(l.Z,{style:{backgroundColor:"var(--primary)"},variant:"contained",loading:R,type:"submit",children:"Lấy m\xe3 x\xe1c thực"})})]}):(0,r.jsxs)("form",{onSubmit:b(M),children:[(0,r.jsxs)("div",{className:a().form_row,children:[(0,r.jsx)("input",{disabled:!0,...y("email"),type:"text",className:"app-input",placeholder:"Email"}),(0,r.jsx)(x.Z,{onClick:()=>t(1),variant:"text",className:a().form_row_change_mail,size:"small",children:"Đổi email"})]}),(0,r.jsxs)("div",{className:a().form_row,children:[(0,r.jsx)("input",{...y("fullname"),type:"text",className:"app-input",placeholder:"Họ v\xe0 t\xean"}),j.fullname&&(0,r.jsx)("p",{className:a().form_row_error,children:j.fullname.message})]}),(0,r.jsxs)("div",{className:a().form_row,children:[(0,r.jsx)("input",{...y("telephone"),type:"text",className:"app-input",placeholder:"Số điện thoại"}),j.telephone&&(0,r.jsx)("p",{className:a().form_row_error,children:j.telephone.message})]}),(0,r.jsxs)("div",{className:a().form_row,children:[(0,r.jsx)("input",{...y("password"),type:"password",className:"app-input",placeholder:"Mật khẩu"}),j.password&&(0,r.jsx)("p",{className:a().form_row_error,children:j.password.message})]}),(0,r.jsxs)("div",{className:a().form_row,children:[(0,r.jsx)("input",{...y("confirm_password"),type:"password",className:"app-input",placeholder:"Nhập lại mật khẩu"}),j.confirm_password&&(0,r.jsx)("p",{className:a().form_row_error,children:j.confirm_password.message})]}),(0,r.jsxs)("div",{className:a().form_row,children:[(0,r.jsx)("input",{...y("code"),type:"text",className:"app-input",placeholder:"M\xe3 x\xe1c thực"}),j.code&&(0,r.jsx)("p",{className:a().form_row_error,children:j.code.message})]}),(0,r.jsx)("div",{className:a().form_btn,children:(0,r.jsx)(l.Z,{style:{backgroundColor:"var(--primary)"},variant:"contained",loading:R,type:"submit",children:"Đăng k\xfd"})})]})]})});v.Layout=n.Ef,t.default=v},70263:function(e){e.exports={form_row:"login_form_row__FlaK7",form_row_change_mail:"login_form_row_change_mail__Oj8Mc",form_row_error:"login_form_row_error__OjLUG",form_btn_forgot:"login_form_btn_forgot__LbQvU",form_btn:"login_form_btn__QU4OW"}},48228:function(e,t,s){"use strict";s.d(t,{D:function(){return m}});var r=s(67294),n=s(464),i=s(32161),o=s(89886),a=s(30081),l=s(33989);class u extends l.l{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;let s=this.options;this.options=this.client.defaultMutationOptions(e),(0,i.VS)(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(t=this.currentMutation)||t.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;null==(e=this.currentMutation)||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();let t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){let e=this.currentMutation?this.currentMutation.state:(0,o.R)(),t={...e,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){a.V.batch(()=>{if(this.mutateOptions&&this.hasListeners()){var t,s,r,n,i,o,a,l;e.onSuccess?(null==(t=(s=this.mutateOptions).onSuccess)||t.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(r=(n=this.mutateOptions).onSettled)||r.call(n,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)):e.onError&&(null==(i=(o=this.mutateOptions).onError)||i.call(o,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(a=(l=this.mutateOptions).onSettled)||a.call(l,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context))}e.listeners&&this.listeners.forEach(({listener:e})=>{e(this.currentResult)})})}}var c=s(85945),h=s(24798);function m(e,t,s){let o=(0,i.lV)(e,t,s),l=(0,c.NL)({context:o.context}),[m]=r.useState(()=>new u(l,o));r.useEffect(()=>{m.setOptions(o)},[m,o]);let p=(0,n.$)(r.useCallback(e=>m.subscribe(a.V.batchCalls(e)),[m]),()=>m.getCurrentResult(),()=>m.getCurrentResult()),f=r.useCallback((e,t)=>{m.mutate(e,t).catch(d)},[m]);if(p.error&&(0,h.L)(m.options.useErrorBoundary,[p.error]))throw p.error;return{...p,mutate:f,mutateAsync:p.mutate}}function d(){}},464:function(e,t,s){"use strict";s.d(t,{$:function(){return n}});var r=s(61688);let n=r.useSyncExternalStore},24798:function(e,t,s){"use strict";function r(e,t){return"function"==typeof e?e(...t):!!e}s.d(t,{L:function(){return r}})}},function(e){e.O(0,[466,774,888,179],function(){return e(e.s=16659)}),_N_E=e.O()}]);