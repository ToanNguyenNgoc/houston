(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461],{6659:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/register",function(){return a(5161)}])},7079:function(e,r,a){"use strict";a.d(r,{D:function(){return s},z:function(){return l}});var o=a(7294);function s(){let[e,r]=(0,o.useState)({load:!1,message:"",openAlert:!1,color:"info"}),a=()=>r({...e,load:!0}),s=e=>{var a;r({load:!1,message:null!==(a=e.message)&&void 0!==a?a:"",openAlert:!0,element:e.element,color:e.color})},n=()=>r({...e,openAlert:!1});return{noti:e,firstLoad:a,resultLoad:s,onCloseNoti:n}}var n=a(1697);function l(){let[e,r]=(0,o.useState)([]),a=async e=>{let{e:a,callBack:o}=e;if(a.target.files)try{var s;let e=[];for(var l=0;l<(null===(s=a.target.files)||void 0===s?void 0:s.length);l++){let r=a.target.files[l],o=new FormData,s={original_url:"",mediaId:l};o.append("file",r);let i=await n.h.uploadMedia(o);i&&(s={original_url:i.data.original_url,mediaId:i.data.id}),e.push(s)}r(e),o&&o(e)}catch(e){}};return{medias:e,handlePostMedia:a}}},5161:function(e,r,a){"use strict";a.r(r);var o=a(5893),s=a(546),n=a(7294),l=a(263),i=a.n(l),t=a(8987),m=a(8228),c=a(1697),d=a(7536),u=a(4231),p=a(588),_=a(7533),f=a(7079),h=a(5388),x=a(3321),g=a(1163);let w=n.memo(function(){let[e,r]=(0,n.useState)(1),a=(0,g.useRouter)(),{noti:s,resultLoad:l,onCloseNoti:w}=(0,f.D)(),v=u.Ry({email:u.Z_().required("Vui l\xf2ng nhập email").matches(p.Gu.email,{message:"Vui l\xf2ng nhập đ\xfang định dạng"}),fullname:1===e?u.Z_():u.Z_().required("Vui l\xf2ng nhập họ v\xe0 t\xean"),telephone:1===e?u.Z_():u.Z_().required("Vui l\xf2ng nhập số điện thoại"),password:1===e?u.Z_():u.Z_().required("Vui l\xf2ng nhập mật khẩu"),confirm_password:1===e?u.Z_():u.Z_().required("Vui l\xf2ng nhập lại mật khẩu").oneOf([u.iH("password"),null],"Mật khẩu nhập lại kh\xf4ng đ\xfang"),code:1===e?u.Z_():u.Z_().required("Vui l\xf2ng nhập m\xe3 OTP")}),{handleSubmit:j,formState:{errors:N},register:y}=(0,d.cI)({resolver:(0,_.X)(v),defaultValues:{email:"",password:"",fullname:"",telephone:"",code:"",confirm_password:""}}),{mutate:b,isLoading:k}=(0,m.D)({mutationKey:["REGISTER"],mutationFn:e=>c.h.register(e),onSuccess:()=>{l({message:1===e?"Đ\xe3 gửi email":"Đăng k\xfd th\xe0nh c\xf4ng",color:"success"}),r(2),2===e&&setTimeout(()=>{a.push("/auth/login")})},onError:e=>{var r,a,o;l({message:null!==(o=null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)&&void 0!==o?o:"",color:"error"})}}),Z=e=>{b(e)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.Ct,{open:s.openAlert,close:w,severity:s.color,message:s.message}),1===e?(0,o.jsxs)("form",{autoComplete:"off",onSubmit:j(Z),children:[(0,o.jsxs)("div",{className:i().form_row,children:[(0,o.jsx)("input",{...y("email"),type:"text",className:"app-input",placeholder:"Email"}),N.email&&(0,o.jsx)("p",{className:i().form_row_error,children:N.email.message})]}),(0,o.jsx)("div",{className:i().form_btn,children:(0,o.jsx)(t.Z,{style:{backgroundColor:"var(--primary)"},variant:"contained",loading:k,type:"submit",children:"Lấy m\xe3 x\xe1c thực"})})]}):(0,o.jsxs)("form",{onSubmit:j(Z),children:[(0,o.jsxs)("div",{className:i().form_row,children:[(0,o.jsx)("input",{disabled:!0,...y("email"),type:"text",className:"app-input",placeholder:"Email"}),(0,o.jsx)(x.Z,{onClick:()=>r(1),variant:"text",className:i().form_row_change_mail,size:"small",children:"Đổi email"})]}),(0,o.jsxs)("div",{className:i().form_row,children:[(0,o.jsx)("input",{...y("fullname"),type:"text",className:"app-input",placeholder:"Họ v\xe0 t\xean"}),N.fullname&&(0,o.jsx)("p",{className:i().form_row_error,children:N.fullname.message})]}),(0,o.jsxs)("div",{className:i().form_row,children:[(0,o.jsx)("input",{...y("telephone"),type:"text",className:"app-input",placeholder:"Số điện thoại"}),N.telephone&&(0,o.jsx)("p",{className:i().form_row_error,children:N.telephone.message})]}),(0,o.jsxs)("div",{className:i().form_row,children:[(0,o.jsx)("input",{...y("password"),type:"password",className:"app-input",placeholder:"Mật khẩu"}),N.password&&(0,o.jsx)("p",{className:i().form_row_error,children:N.password.message})]}),(0,o.jsxs)("div",{className:i().form_row,children:[(0,o.jsx)("input",{...y("confirm_password"),type:"password",className:"app-input",placeholder:"Nhập lại mật khẩu"}),N.confirm_password&&(0,o.jsx)("p",{className:i().form_row_error,children:N.confirm_password.message})]}),(0,o.jsxs)("div",{className:i().form_row,children:[(0,o.jsx)("input",{...y("code"),type:"text",className:"app-input",placeholder:"M\xe3 x\xe1c thực"}),N.code&&(0,o.jsx)("p",{className:i().form_row_error,children:N.code.message})]}),(0,o.jsx)("div",{className:i().form_btn,children:(0,o.jsx)(t.Z,{style:{backgroundColor:"var(--primary)"},variant:"contained",loading:k,type:"submit",children:"Đăng k\xfd"})})]})]})});w.Layout=s.Ef,r.default=w},263:function(e){e.exports={form_row:"login_form_row__FlaK7",form_row_change_mail:"login_form_row_change_mail__Oj8Mc",form_row_error:"login_form_row_error__OjLUG",form_btn_forgot:"login_form_btn_forgot__LbQvU",form_btn:"login_form_btn__QU4OW"}}},function(e){e.O(0,[912,666,774,888,179],function(){return e(e.s=6659)}),_N_E=e.O()}]);