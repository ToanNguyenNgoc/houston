(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[117],{34481:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/bookings",function(){return a(29684)}])},29684:function(e,t,a){"use strict";a.r(t),a.d(t,{PageHeaderAccount:function(){return f}});var i=a(85893),o=a(85701),_=a(14833),n=a(71697),c=a(26394),r=a.n(c),s=a(59403),l=a(89583),d=a(30381),u=a.n(d),h=a(41664),g=a.n(h),m=a(64074),v=a(8987),b=a(11163);let f=e=>{let{title:t}=e,a=(0,b.useRouter)();return(0,i.jsxs)("div",{className:r().account_page_title,children:[(0,i.jsx)("button",{onClick:()=>a.back(),className:r().account_page_title_btn,children:(0,i.jsx)(l._HU,{size:26,color:"var(--primary)"})}),(0,i.jsx)("span",{children:t})]})},p=()=>{var e,t,a,_;let{data:c,fetchNextPage:d,isLoading:h,isFetchingNextPage:b}=(0,s.N)({queryKey:["BOOKINGS"],queryFn:e=>{let{pageParam:t=1}=e;return n.h.bookings({page:t,limit:10,includes:"full_address|villa_media"})},getNextPageParam:e=>e.current_page+1}),p=null!==(a=null===(e=null==c?void 0:c.pages[0])||void 0===e?void 0:e.total)&&void 0!==a?a:0,x=null!==(_=null==c?void 0:null===(t=c.pages)||void 0===t?void 0:t.map(e=>e.data).flat())&&void 0!==_?_:[];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.pQ,{title:"Lịch sử đặt ph\xf2ng",description:"",url:""}),(0,i.jsx)(f,{title:"Lịch sử đặt ph\xf2ng"}),(0,i.jsxs)("div",{className:r().account_page_body,children:[(0,i.jsx)("ul",{className:r().booking_list,children:x.map(e=>{var t,a,o,_,n,c,s,d,h,v;return(0,i.jsx)("li",{className:r().booking_list_item,children:(0,i.jsxs)(g(),{href:"/",className:r().booking_item,children:[(0,i.jsx)("div",{className:r().booking_item_img,children:(0,i.jsx)("img",{src:null===(t=e.villa)||void 0===t?void 0:null===(a=t.thumbnail)||void 0===a?void 0:a.original_url,alt:""})}),(0,i.jsxs)("div",{className:r().booking_item_detail,children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:r().booking_item_detail_head_create,children:["ng\xe0y đặt: ",u()(e.created_at).format("HH:mm DD [thg] MM, YYYY")]}),(0,i.jsxs)("div",{className:r().booking_item_detail_head,children:[(0,i.jsx)("span",{children:null===(o=e.villa)||void 0===o?void 0:o.name}),(0,i.jsxs)("span",{children:["Trạng th\xe1i đặt ",(0,i.jsx)("br",{}),e.status_booking]})]}),(0,i.jsxs)("span",{className:r().booking_item_detail_address,children:[(0,i.jsx)(l.Nh4,{color:"var(--primary)",size:12}),null===(_=e.branch)||void 0===_?void 0:_.address,",",null===(n=e.branch)||void 0===n?void 0:null===(c=n.ward)||void 0===c?void 0:c.name,",",null===(s=e.branch)||void 0===s?void 0:null===(d=s.district)||void 0===d?void 0:d.name,",",null===(h=e.branch)||void 0===h?void 0:null===(v=h.province)||void 0===v?void 0:v.name]}),(0,i.jsxs)("div",{className:r().range_date,children:[(0,i.jsxs)("div",{className:r().range_date_item,children:[(0,i.jsx)("p",{children:"Nhận ph\xf2ng"}),(0,i.jsx)("p",{children:u()(e.from_date_booking).format("DD [thg] MM, YYYY")})]}),(0,i.jsxs)("div",{className:r().range_date_item,children:[(0,i.jsx)("p",{children:"Trả ph\xf2ng"}),(0,i.jsx)("p",{children:u()(e.to_date_booking).format("DD [thg] MM, YYYY")})]})]})]}),(0,i.jsxs)("div",{className:r().booking_item_detail_amount,children:[(0,i.jsx)("span",{children:"Tổng cộng"}),(0,i.jsxs)("span",{children:[(0,m.BX)(e.amount)," / (",e.nights," đ\xeam)"]})]})]})]})},e.id)})}),(0,i.jsx)("div",{className:r().account_page_bot,children:x.length<p&&(0,i.jsx)(v.Z,{loading:b,onClick:()=>d(),style:{color:"var(--primary)"},children:"Xem th\xeam"})})]})]})};p.Layout=_.p0,t.default=p},26394:function(e){e.exports={account_page_title:"account_account_page_title__cFga2",account_page_body:"account_account_page_body__Fsv84",acc_form_row:"account_acc_form_row__lIrx_",acc_form_row_label:"account_acc_form_row_label__vcEod",acc_form_row_ip:"account_acc_form_row_ip__qR_vq",acc_form_row_ip_error:"account_acc_form_row_ip_error__XacFg",acc_form_bot:"account_acc_form_bot__M4cAl",row_avatar:"account_row_avatar__ge_Na",form_avatar:"account_form_avatar__tTEgY",form_avatar_btn:"account_form_avatar_btn__qwwkH",booking_item:"account_booking_item__oALVH",booking_item_detail:"account_booking_item_detail__reDxw",booking_item_detail_head:"account_booking_item_detail_head__Dc_An",booking_item_detail_amount:"account_booking_item_detail_amount__hPeZT",booking_item_img:"account_booking_item_img__hSbjz",booking_item_detail_head_create:"account_booking_item_detail_head_create__0_9rt",booking_item_detail_address:"account_booking_item_detail_address__kKbUr",range_date:"account_range_date__C1LDC",range_date_item:"account_range_date_item__jRXps",account_page_bot:"account_account_page_bot__NIbYI",booking_list_item:"account_booking_list_item__QiWar"}},59403:function(e,t,a){"use strict";a.d(t,{N:function(){return r}});var i=a(32161),o=a(52924),_=a(9499);class n extends o.z{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:(0,_.Gm)()},t)}getOptimisticResult(e){return e.behavior=(0,_.Gm)(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,t){var a,i,o,n,c,r;let{state:s}=e,l=super.createResult(e,t),{isFetching:d,isRefetching:u}=l,h=d&&(null==(a=s.fetchMeta)?void 0:null==(i=a.fetchMore)?void 0:i.direction)==="forward",g=d&&(null==(o=s.fetchMeta)?void 0:null==(n=o.fetchMore)?void 0:n.direction)==="backward";return{...l,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,_.Qy)(t,null==(c=s.data)?void 0:c.pages),hasPreviousPage:(0,_.ZF)(t,null==(r=s.data)?void 0:r.pages),isFetchingNextPage:h,isFetchingPreviousPage:g,isRefetching:u&&!h&&!g}}}var c=a(67187);function r(e,t,a){let o=(0,i._v)(e,t,a);return(0,c.r)(o,n)}}},function(e){e.O(0,[885,912,828,774,888,179],function(){return e(e.s=34481)}),_N_E=e.O()}]);